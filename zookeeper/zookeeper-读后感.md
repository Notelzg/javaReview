# zookeeper
zookeeper 是一个分布式一致性协议中间件，本身并不直接提供、锁的实现，但是通过
其提供的功能，我可以实现自己想要的分布式锁、分布式一致性功能。
## 节点
zookeer节点分为两种，
临时节点，当创建改节点的连接关闭之后，该节点就会消失
永久节点，创建之后会一直存在。
1,Persistent是临时节点、
2, Persistent_sequential是临时有序节点。如00000、000001.....
3, Ephemeral是永久节点、
4, Ephemeral_sequential是永久有序节点。
## 节点监听
zookeer通过监听机制来代替轮询获取信息，这样可以大大减少客户端向zookeer服务器的请求数，减少
通讯流量，客户端通过添加监控点获知节点的变化，然后做响应的事件。这套机制就像按钮注册事件，
当按钮被点击之后，产生一个点击事件，点击事件会触发注册在该按钮上面的处理程序，通过注册通知机制
替换轮询机制，更高效、代码更简洁明了。
## 可以用来做什么
首先来说一下，通过zookeer可以做什么吧，
1， 注册发现服务（服务节点为永久节点、提供服务的机器ip和端口为临时节点）
2， 分布式锁（同名节点只能被创建一次，通过创建临时节点，实现分布式锁，如果节点服务挂掉，锁会失效）
3,  配置中心（把配置保存到zookpeer一个永久节点，监听配置节点，有改动就去拉取最新内容）
4,  任务分发中心，master 临时节点作为控制中心、创建3个永久节点， task（有序） assign(有序) worker (有序)
生产者向task创建任务，消费者向 worker创建自己，master分配任务个worker，并修改assign同时删除task中的task，消费者监听assign
消费者通过监听 assign--worker-1的变化，就可以知道自己被分配的任务列表，
 具体的路径结构如下：
root--|--master
      |--task-[task-1,task-2]
      |--worker--[worker-1, work-2]
      |--assign--|-worker-1-[worker-1]
                 |-worker-2-[worker-2]
                 
## 高可🍻t用
通过集群部署的方式，保证其高可用性。

## 总结
zookeer作为分布式协作中间件，本身不提供可以直接使用的功能，但是通过其提供的基本功能，我们可以
完成自己想要做的事情，zookeer提供了一套机制，保证了服务的高可用、一致性、通过linux文件结构的
方式提供基础的根节点，应用程序根据自己的需要去进行增删改查、监控节点，完成自己想要做的事情。
通过zookeer更容易进行分布式机器的协作。
